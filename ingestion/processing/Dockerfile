FROM python:3.10

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

ENV MINIO_URL=$MINIO_URL
ENV AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID
ENV AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY
ENV AWS_BUCKET_NAME=$AWS_BUCKET_NAME

ENV URL_ELASTICSEARCH=$URL_ELASTICSEARCH
ENV INDEX_NAME=$INDEX_NAME
ENV SAMPLE=$SAMPLE

COPY main.py .

CMD [ "python3", "main.py" ]
